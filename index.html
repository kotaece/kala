<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Mayokage Kala AR</title>
    
    <!-- CSSファイルの読み込み -->
    <link rel="stylesheet" href="style.css">
    
    <!-- model-viewerの読み込み -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body>

    <!-- BGM (初期状態はミュート) -->
    <audio id="bgm" src="assets/mayokage_BGM.mp3" loop preload="auto" muted></audio>

    <!-- 言語選択プルダウン (左上に配置) -->
    <select id="language-selector" class="language-selector">
        <option value="ja">日本語</option>
        <option value="en">English</option>
        <option value="id">Bahasa Indonesia</option>
        <option value="zh">中文</option>
    </select>

    <!-- PC用警告 (全画面オーバーレイ) -->
    <div id="pc-warning" class="pc-warning">
        <h2>
            <span data-i18n="pc_title">スマートフォンでご覧ください</span><br>
        </h2>
        <p data-i18n="pc_desc">
            このコンテンツはAR機能を使用するため、<br>スマートフォンまたはタブレットでのアクセスを推奨しています。
        </p>
        <div class="qr-box">
            <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://kotaece.github.io/kala/" 
                 alt="QR Code">
        </div>
    </div>

    <!-- メインコンテンツ -->
    <div class="main-content">
        
        <!-- サウンド切り替えボタン -->
        <!-- テキストはJSで制御されますが、初期値としてdata-i18nを持たせます -->
        <button id="unmute-button" data-i18n="sound_off">🔇 サウンド OFF</button>

        <!-- 3D/ARビューワー -->
        <model-viewer id="random-model"
                      src="" 
                      ios-src=""
                      alt="3D Model"
                      ar
                      ar-modes="webxr scene-viewer quick-look"
                      camera-controls
                      auto-rotate
                      shadow-intensity="1">
            
            <!-- AR召喚ボタン (slot="ar-button") -->
            <button slot="ar-button" id="ar-summon-btn" class="ar-summon-button">
                <span data-i18n="summon_btn">カラを召喚する</span><br>
            </button>
        
        </model-viewer>

        <!-- アプリ内ブラウザ用警告 -->
        <div id="browser-warning" class="browser-warning">
            <h2>
                <span data-i18n="browser_title">ブラウザを変更してください</span><br>
                <span class="en-sub" data-i18n="browser_sub">Please open in default browser</span>
            </h2>
            <p data-i18n="browser_desc">
                現在お使いのブラウザではAR機能が制限されています。<br>
                <strong>Safari</strong> (iPhone) または <strong>Chrome</strong> で開き直してください。
            </p>
            
            <!-- URLコピーボタン -->
            <button id="copy-url-btn" class="copy-btn" data-i18n="copy_btn">現在のURLをコピー</button>
            
            <p class="note-text" data-i18n="browser_note">
                ※右上のメニュー等から「ブラウザで開く」を選択するか、URLをコピーして貼り付けてください。
            </p>
        </div>
    </div>

    <!-- ロジックファイルの読み込み -->
    <script src="app.js"></script>
</body>
</html>