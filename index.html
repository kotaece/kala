<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mayokage Kala AR</title>
    
    <link rel="stylesheet" href="style.css">

    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body>

    <audio id="bgm" src="assets/mayokage_BGM.mp3" loop preload="auto" muted></audio>

    <div class="pc-warning">
        <h2>
            ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ã”è¦§ãã ã•ã„<br>
            <span class="en-sub">Please view on a smartphone</span>
        </h2>
        <p>
            ã“ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ARæ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã€<br>ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã¾ãŸã¯ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã§ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚<br>
            <span class="en-text">
                This content uses AR features.<br>
                We recommend accessing it via a smartphone or tablet.
            </span>
        </p>

        <div class="qr-box">
            <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://kotaece.github.io/kala/" 
                 alt="QR Code to https://kotaece.github.io/kala/">
        </div>
    </div>

    <div class="main-content">
        
        <button id="unmute-button">
            ğŸ”Š ã‚µã‚¦ãƒ³ãƒ‰ ON
        </button>

        <model-viewer id="random-model"
                      src="" 
                      alt="3Dãƒ¢ãƒ‡ãƒ«"
                      ar
                      ar-modes="webxr scene-viewer quick-look"
                      camera-controls
                      auto-rotate
                      shadow-intensity="1">
            
            <button slot="ar-button" class="ar-summon-button">
                ã‚«ãƒ©ã‚’å¬å–šã™ã‚‹<br>
                <span style="font-size: 0.7em; font-weight: normal;">Summon the Kala</span>
            </button>
        
        </model-viewer>
    </div>

    <script src="app.js"></script> 

    <script>
    function checkDevice() {
        var ua = navigator.userAgent;
        var isSmartDevice = false;

        // 1. ä¸€èˆ¬çš„ãªã‚¹ãƒãƒ›ï¼ˆiPhone, Androidã‚¹ãƒãƒ›ï¼‰ã®åˆ¤å®š
        if (ua.indexOf('iPhone') > 0 || (ua.indexOf('Android') > 0 && ua.indexOf('Mobile') > 0)) {
            isSmartDevice = true;
        }
        // 2. iPadï¼ˆãŠã‚ˆã³Androidã‚¿ãƒ–ãƒ¬ãƒƒãƒˆï¼‰ã®åˆ¤å®š
        // "iPad"ã¨ã„ã†æ–‡å­—ãŒå«ã¾ã‚Œã‚‹ ã‹ "Macintosh"ã ãŒã‚¿ãƒƒãƒãƒã‚¤ãƒ³ãƒˆãŒã‚ã‚‹å ´åˆ
        else if (ua.indexOf('iPad') > 0 || ua.indexOf('Android') > 0 || (ua.indexOf('Macintosh') > 0 && navigator.maxTouchPoints > 1)) {
            isSmartDevice = true;
        }

        // è¡¨ç¤ºã®åˆ‡ã‚Šæ›¿ãˆå‡¦ç†
        var warning = document.querySelector('.pc-warning'); // è­¦å‘Šæ–‡ã®è¦ç´ 
        var content = document.querySelector('.main-content'); // ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„

        if (isSmartDevice) {
            // ã‚¹ãƒãƒ›ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã®å ´åˆ
            if(warning) warning.style.display = 'none';
            if(content) content.style.display = 'flex'; // ã¾ãŸã¯ block
        } else {
            // PCã®å ´åˆ
            if(warning) warning.style.display = 'block';
            if(content) content.style.display = 'none';
        }
    }

    // èª­ã¿è¾¼ã¿æ™‚ã«å®Ÿè¡Œ
    window.onload = checkDevice;
    </script>

</body>
</html>